(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(t,e,o){t.exports=o(59)},48:function(t,e,o){},55:function(t,e,o){},59:function(t,e,o){"use strict";o.r(e);var a=o(0),n=o.n(a),r=o(19),i=o.n(r),s=(o(48),o(40)),l=o(6),c=(o(49),o(8)),h=o(9),u=o(11),b=o(10),v=o(64),f=o(65),m=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){return Object(c.a)(this,o),e.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){return n.a.createElement(v.a,{bg:"dark",variant:"dark"},n.a.createElement(v.a.Brand,null,"Tetris Clone"),n.a.createElement(f.a,{className:"mr-auto"},n.a.createElement(f.a.Link,{href:"/"},"Home"),n.a.createElement(f.a.Link,{href:"https://github.com/V-Wong/WebTetris"},"Source Code"),n.a.createElement(f.a.Link,{href:"https://vwong.dev"},"Other Projects")))}}]),o}(n.a.Component),d=o(61),k=o(62),y=o(63),g=o(66),p=o(5),O=o(42),j=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(t){var a;Object(c.a)(this,o),a=e.call(this,t);for(var n=[],r=0;r<20;r++){n[r]=[];for(var i=0;i<4;i++)n[r][i]=document.createElement("div"),n[r][i].classList.add("cell"),n[r][i].style.backgroundColor="grey"}return a.state={grid:n},a}return Object(h.a)(o,[{key:"drawTetromino",value:function(t){console.log(t);var e,o=Object(p.a)(t.blocks);try{for(o.s();!(e=o.n()).done;){var a=e.value;this.state.grid[a[1]][a[0]].style.backgroundColor=t.colour}}catch(n){o.e(n)}finally{o.f()}}},{key:"drawRotation",value:function(){if(this.props.rotation){var t,e=Object(p.a)(this.state.grid);try{for(e.s();!(t=e.n()).done;){var o,a=t.value,n=Object(p.a)(a);try{for(n.s();!(o=n.n()).done;){o.value.style.backgroundColor="grey"}}catch(b){n.e(b)}finally{n.f()}}}catch(b){e.e(b)}finally{e.f()}var r,i=0,s=Object(p.a)(this.props.rotation);try{for(s.s();!(r=s.n()).done;){var l=new(0,r.value);"Line"===l.constructor.name&&l.rotate();var c,h=Object(p.a)(l.blocks);try{for(h.s();!(c=h.n()).done;){for(var u=c.value;u[0]>3;)l.updatePosition(-1,0);for(;i&&u[1]<i+3;)l.updatePosition(0,1)}}catch(b){h.e(b)}finally{h.f()}this.drawTetromino(l),i=Math.max.apply(Math,Object(O.a)(l.blocks.map((function(t){return t[1]}))))}}catch(b){s.e(b)}finally{s.f()}}}},{key:"componentDidMount",value:function(){var t,e=document.getElementById("tetromino-preview"),o=Object(p.a)(this.state.grid);try{for(o.s();!(t=o.n()).done;){var a,n=t.value,r=Object(p.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.appendChild(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){o.e(s)}finally{o.f()}this.drawRotation()}},{key:"componentDidUpdate",value:function(){this.drawRotation()}},{key:"render",value:function(){return n.a.createElement("div",{id:"tetromino-preview"})}}]),o}(n.a.Component),E=function(){function t(){Object(c.a)(this,t),this.blocks=void 0,this.rotation=void 0,this.colour=void 0}return Object(h.a)(t,[{key:"updatePosition",value:function(t,e){var o,a=Object(p.a)(this.blocks);try{for(a.s();!(o=a.n()).done;){var n=o.value;n[0]+=t,n[1]+=e}}catch(r){a.e(r)}finally{a.f()}}},{key:"rotate",value:function(){return null}}]),t}(),T=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){var t;return Object(c.a)(this,o),(t=e.call(this)).blocks=[[6,0],[6,1],[7,0],[7,1]],t.colour="red",t}return o}(E),w=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){var t;return Object(c.a)(this,o),(t=e.call(this)).blocks=[[6,0],[6,1],[6,2],[6,3]],t.rotation=0,t.colour="blue",t}return Object(h.a)(o,[{key:"rotate",value:function(){if(this.rotation%4===0){var t,e=this.blocks[3][1],o=-1,a=Object(p.a)(this.blocks);try{for(a.s();!(t=a.n()).done;){var n=t.value;n[0]=n[0]+o,n[1]=e,o+=1}}catch(O){a.e(O)}finally{a.f()}}else if(this.rotation%4===1){var r,i=this.blocks[2][0],s=-3,l=Object(p.a)(this.blocks);try{for(l.s();!(r=l.n()).done;){var c=r.value;c[0]=i,c[1]=c[1]+s,s+=1}}catch(O){l.e(O)}finally{l.f()}}else if(this.rotation%4===2){var h,u=this.blocks[3][1],b=-2,v=Object(p.a)(this.blocks);try{for(v.s();!(h=v.n()).done;){var f=h.value;f[0]=f[0]+b,f[1]=u,b+=1}}catch(O){v.e(O)}finally{v.f()}}else{var m,d=this.blocks[1][0],k=-3,y=Object(p.a)(this.blocks);try{for(y.s();!(m=y.n()).done;){var g=m.value;g[0]=d,g[1]=g[1]+k,k+=1}}catch(O){y.e(O)}finally{y.f()}}this.rotation+=1}}]),o}(E),C=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){var t;return Object(c.a)(this,o),(t=e.call(this)).blocks=[[6,0],[7,0],[8,0],[7,1]],t.rotation=0,t.colour="green",t}return Object(h.a)(o,[{key:"rotate",value:function(){this.rotation%4==0?(this.blocks[0]=[this.blocks[0][0]+1,this.blocks[0][1]-1],this.blocks[2]=[this.blocks[2][0]-1,this.blocks[2][1]+1],this.blocks[3]=[this.blocks[3][0]-1,this.blocks[3][1]-1]):this.rotation%4==1?(this.blocks[0]=[this.blocks[0][0]+1,this.blocks[0][1]+1],this.blocks[2]=[this.blocks[2][0]-1,this.blocks[2][1]-1],this.blocks[3]=[this.blocks[3][0]+1,this.blocks[3][1]-1]):this.rotation%4==2?(this.blocks[0]=[this.blocks[0][0]-1,this.blocks[0][1]+1],this.blocks[2]=[this.blocks[2][0]+1,this.blocks[2][1]-1],this.blocks[3]=[this.blocks[3][0]+1,this.blocks[3][1]+1]):(this.blocks[0]=[this.blocks[0][0]-1,this.blocks[0][1]-1],this.blocks[2]=[this.blocks[2][0]+1,this.blocks[2][1]+1],this.blocks[3]=[this.blocks[3][0]-1,this.blocks[3][1]+1]),this.rotation+=1}}]),o}(E),B=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){var t;return Object(c.a)(this,o),(t=e.call(this)).blocks=[[6,0],[7,0],[8,0],[8,1]],t.rotation=0,t.colour="yellow",t}return Object(h.a)(o,[{key:"rotate",value:function(){var t=this.blocks[1];this.rotation%4==0?(this.blocks[0]=[t[0],t[1]-1],this.blocks[2]=[t[0]-1,t[1]+1],this.blocks[3]=[t[0],t[1]+1]):this.rotation%4==1?(this.blocks[0]=[t[0]-1,t[1]],this.blocks[2]=[t[0]-1,t[1]-1],this.blocks[3]=[t[0]+1,t[1]]):this.rotation%4==2?(this.blocks[0]=[t[0]+1,t[1]-1],this.blocks[2]=[t[0],t[1]-1],this.blocks[3]=[t[0],t[1]+1]):(this.blocks[0]=[t[0]+1,t[1]+1],this.blocks[2]=[t[0]-1,t[1]],this.blocks[3]=[t[0]+1,t[1]]),this.rotation+=1}}]),o}(E),R=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){var t;return Object(c.a)(this,o),(t=e.call(this)).blocks=[[6,0],[7,0],[8,0],[6,1]],t.rotation=0,t.colour="orange",t}return Object(h.a)(o,[{key:"rotate",value:function(){var t=this.blocks[1];this.rotation%4==0?(this.blocks[0]=[t[0],t[1]-1],this.blocks[2]=[t[0]-1,t[1]-1],this.blocks[3]=[t[0],t[1]+1]):this.rotation%4==1?(this.blocks[0]=[t[0]-1,t[1]],this.blocks[2]=[t[0]+1,t[1]],this.blocks[3]=[t[0]+1,t[1]-1]):this.rotation%4==2?(this.blocks[0]=[t[0],t[1]+1],this.blocks[2]=[t[0],t[1]-1],this.blocks[3]=[t[0]+1,t[1]+1]):(this.blocks[0]=[t[0]-1,t[1]],this.blocks[2]=[t[0]+1,t[1]],this.blocks[3]=[t[0]-1,t[1]+1]),this.rotation+=1}}]),o}(E),L=(o(55),[R,T,w,C,B,R]);function P(){return L[Math.floor(Math.random()*L.length)]}var S=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(t){var a;Object(c.a)(this,o),a=e.call(this,t);for(var n=[],r=0;r<20;r++){n[r]=[];for(var i=0;i<10;i++)n[r][i]=document.createElement("div"),n[r][i].classList.add("cell"),n[r][i].style.backgroundColor="grey"}for(var s=P(),l=[],h=0;h<5;h++)l.push(P());return a.state={grid:n,activeTetromino:new s,tetrominoRotation:l},a}return Object(h.a)(o,[{key:"moveTetromino",value:function(t){var e,o=Object(p.a)(this.state.activeTetromino.blocks);try{for(o.s();!(e=o.n()).done;){var a=e.value;this.state.grid[a[1]][a[0]].style.backgroundColor="grey"}}catch(n){o.e(n)}finally{o.f()}37===t?this.detectCollision(this.state.activeTetromino,-1,0)||this.state.activeTetromino.updatePosition(-1,0):39===t?this.detectCollision(this.state.activeTetromino,1,0)||this.state.activeTetromino.updatePosition(1,0):40===t&&(this.detectCollision(this.state.activeTetromino,0,1)||this.state.activeTetromino.updatePosition(0,1))}},{key:"rotateTetromino",value:function(){var t=JSON.parse(JSON.stringify(this.state.activeTetromino));if(t.rotate=this.state.activeTetromino.rotate,t.rotate(),!this.detectCollision(t,0,0)){var e,o=this.state.grid,a=Object(p.a)(this.state.activeTetromino.blocks);try{for(a.s();!(e=a.n()).done;){var n=e.value;o[n[1]][n[0]].style.backgroundColor="grey"}}catch(r){a.e(r)}finally{a.f()}this.state.activeTetromino.rotate()}}},{key:"drawTetromino",value:function(t){var e,o=Object(p.a)(t.blocks);try{for(o.s();!(e=o.n()).done;){var a=e.value;this.state.grid[a[1]][a[0]].style.backgroundColor=t.colour}}catch(n){o.e(n)}finally{o.f()}}},{key:"detectCollision",value:function(t,e,o){var a,n=Object(p.a)(t.blocks);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(!(0<=r[0]+e&&r[0]+e<10)||!(0<=r[1]+o&&r[1]+o<20)||this.state.grid[r[1]+o][r[0]+e].storeBlock)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"getCompleteRows",value:function(){var t=[];for(var e in this.state.grid)this.state.grid[e].every((function(t){return t.storeBlock}))&&t.push(e);return t}},{key:"clearRow",value:function(t){for(var e=t-1;e>=0;e--)for(var o in this.state.grid[e])this.state.grid[e+1][o].style.backgroundColor=this.state.grid[e][o].style.backgroundColor,this.state.grid[e+1][o].storeBlock=this.state.grid[e][o].storeBlock}},{key:"autoDropTetromino",value:function(){var t,e=Object(p.a)(this.state.activeTetromino.blocks);try{for(e.s();!(t=e.n()).done;){var o=t.value;this.state.grid[o[1]][o[0]].style.backgroundColor="grey"}}catch(a){e.e(a)}finally{e.f()}this.state.activeTetromino.updatePosition(0,1)}},{key:"storeBlock",value:function(){var t,e=Object(p.a)(this.state.activeTetromino.blocks);try{for(e.s();!(t=e.n()).done;){var o=t.value;this.state.grid[o[1]][o[0]].storeBlock=!0}}catch(a){e.e(a)}finally{e.f()}}},{key:"detectLose",value:function(){return this.state.grid[0].some((function(t){return t.storeBlock}))}},{key:"runGame",value:function(){if(this.detectCollision(this.state.activeTetromino,0,1)){this.storeBlock();var t=this.state.tetrominoRotation,e=t.shift();t.push(P()),this.setState({activeTetromino:new e,tetrominoRotation:t})}else this.autoDropTetromino();this.drawTetromino(this.state.activeTetromino);var o,a=Object(p.a)(this.getCompleteRows());try{for(a.s();!(o=a.n()).done;){var n=o.value;this.clearRow(n)}}catch(r){a.e(r)}finally{a.f()}this.detectLose()&&alert("You lose")}},{key:"componentDidMount",value:function(){var t,e=this,o=document.getElementById("main-game"),a=Object(p.a)(this.state.grid);try{for(a.s();!(t=a.n()).done;){var n,r=t.value,i=Object(p.a)(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;o.appendChild(s)}}catch(l){i.e(l)}finally{i.f()}}}catch(l){a.e(l)}finally{a.f()}window.addEventListener("keydown",(function(t){38===t.keyCode&&e.rotateTetromino(),e.moveTetromino(t.keyCode),e.drawTetromino(e.state.activeTetromino)})),setInterval((function(){e.runGame()}),100)}},{key:"render",value:function(){return n.a.createElement(d.a,null,n.a.createElement(k.a,null,n.a.createElement(y.a,{sm:7},n.a.createElement("div",{id:"main-game"})),n.a.createElement(y.a,{sm:5},n.a.createElement(j,{rotation:this.state.tetrominoRotation}))))}}]),o}(n.a.Component),D=function(t){Object(u.a)(o,t);var e=Object(b.a)(o);function o(){return Object(c.a)(this,o),e.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){return n.a.createElement(d.a,{style:{width:"100%",marginTop:"2vh"}},n.a.createElement(k.a,null,n.a.createElement(y.a,{sm:6},n.a.createElement(S,null)),n.a.createElement(y.a,{sm:6},n.a.createElement(g.a,null,n.a.createElement(g.a.Header,null,"Tetris Clone - Game Description"),n.a.createElement(g.a.Body,null,n.a.createElement(g.a.Title,null,"Instructions"),n.a.createElement(g.a.Text,null,"Each completely filled row will be cleared and points will be awarded. ",n.a.createElement("br",null),"Fill multiple rows with a single piece to multiply the points gain. ",n.a.createElement("br",null),"The game is over once any of your Tetrominos fill the top row. ",n.a.createElement("br",null),"The goal is to play for as long as possible and score the most points. ",n.a.createElement("br",null)),n.a.createElement(g.a.Title,null,"Controls"),n.a.createElement(g.a.Text,null,n.a.createElement("b",null,"Left, Down, Right:")," move the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Up:")," rotate the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Space:")," Fast drop the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Shift:")," Hold the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Escape:")," Pause the game."))),n.a.createElement(g.a,{style:{marginTop:"1vh"}},n.a.createElement(g.a.Header,null,"High Scores"),n.a.createElement(g.a.Body,null)))))}}]),o}(n.a.Component);var M=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,null),n.a.createElement(s.a,null,n.a.createElement(l.a,{path:"/",component:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.814f792d.chunk.js.map
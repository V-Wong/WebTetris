(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(t,e,a){t.exports=a(59)},48:function(t,e,a){},55:function(t,e,a){},59:function(t,e,a){"use strict";a.r(e);var o=a(0),n=a.n(o),r=a(19),i=a.n(r),l=(a(48),a(40)),s=a(6),c=(a(49),a(8)),h=a(9),u=a(11),v=a(10),b=a(65),m=a(66),f=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return n.a.createElement(b.a,{bg:"dark",variant:"dark"},n.a.createElement(b.a.Brand,null,"Tetris Clone"),n.a.createElement(m.a,{className:"mr-auto"},n.a.createElement(m.a.Link,{href:"/"},"Home"),n.a.createElement(m.a.Link,{href:"https://github.com/V-Wong/WebTetris"},"Source Code"),n.a.createElement(m.a.Link,{href:"https://vwong.dev"},"Other Projects")))}}]),a}(n.a.Component),d=a(61),k=a(62),y=a(63),p=a(67),g=a(5),E=a(64),O=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return n.a.createElement(d.a,{style:{padding:0}},n.a.createElement(k.a,null,n.a.createElement(y.a,null,n.a.createElement("h3",null,n.a.createElement(E.a,{variant:"primary",style:{width:"100%"}},"Score: ",this.props.score))),n.a.createElement(y.a,null,n.a.createElement("h3",null,n.a.createElement(E.a,{variant:"danger",style:{width:"100%"}},"Level: ",this.props.level)))))}}]),a}(n.a.Component),j=a(42),T=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(t){var o;Object(c.a)(this,a),o=e.call(this,t);for(var n=[],r=0;r<20;r++){n[r]=[];for(var i=0;i<4;i++)n[r][i]=document.createElement("div"),n[r][i].classList.add("cell"),n[r][i].style.backgroundColor="grey"}return o.state={grid:n},o}return Object(h.a)(a,[{key:"drawTetromino",value:function(t){console.log(t);var e,a=Object(g.a)(t.blocks);try{for(a.s();!(e=a.n()).done;){var o=e.value;this.state.grid[o[1]][o[0]].style.backgroundColor=t.colour}}catch(n){a.e(n)}finally{a.f()}}},{key:"drawRotation",value:function(){if(this.props.rotation){var t,e=Object(g.a)(this.state.grid);try{for(e.s();!(t=e.n()).done;){var a,o=t.value,n=Object(g.a)(o);try{for(n.s();!(a=n.n()).done;){a.value.style.backgroundColor="grey"}}catch(v){n.e(v)}finally{n.f()}}}catch(v){e.e(v)}finally{e.f()}var r,i=0,l=Object(g.a)(this.props.rotation);try{for(l.s();!(r=l.n()).done;){var s=new(0,r.value);"Line"===s.constructor.name&&s.rotate();var c,h=Object(g.a)(s.blocks);try{for(h.s();!(c=h.n()).done;){for(var u=c.value;u[0]>3;)s.updatePosition(-1,0);for(;i&&u[1]<i+3;)s.updatePosition(0,1)}}catch(v){h.e(v)}finally{h.f()}this.drawTetromino(s),i=Math.max.apply(Math,Object(j.a)(s.blocks.map((function(t){return t[1]}))))}}catch(v){l.e(v)}finally{l.f()}}}},{key:"componentDidMount",value:function(){var t,e=document.getElementById("tetromino-preview"),a=Object(g.a)(this.state.grid);try{for(a.s();!(t=a.n()).done;){var o,n=t.value,r=Object(g.a)(n);try{for(r.s();!(o=r.n()).done;){var i=o.value;e.appendChild(i)}}catch(l){r.e(l)}finally{r.f()}}}catch(l){a.e(l)}finally{a.f()}this.drawRotation()}},{key:"componentDidUpdate",value:function(){this.drawRotation()}},{key:"render",value:function(){return n.a.createElement("div",{id:"tetromino-preview"})}}]),a}(n.a.Component),w=function(){function t(){Object(c.a)(this,t),this.blocks=void 0,this.rotation=void 0,this.colour=void 0}return Object(h.a)(t,[{key:"updatePosition",value:function(t,e){var a,o=Object(g.a)(this.blocks);try{for(o.s();!(a=o.n()).done;){var n=a.value;n[0]+=t,n[1]+=e}}catch(r){o.e(r)}finally{o.f()}}},{key:"rotate",value:function(){return null}}]),t}(),C=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).blocks=[[6,0],[6,1],[7,0],[7,1]],t.colour="red",t}return a}(w),L=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).blocks=[[6,0],[6,1],[6,2],[6,3]],t.rotation=0,t.colour="blue",t}return Object(h.a)(a,[{key:"rotate",value:function(){if(this.rotation%4===0){var t,e=this.blocks[3][1],a=-1,o=Object(g.a)(this.blocks);try{for(o.s();!(t=o.n()).done;){var n=t.value;n[0]=n[0]+a,n[1]=e,a+=1}}catch(E){o.e(E)}finally{o.f()}}else if(this.rotation%4===1){var r,i=this.blocks[2][0],l=-3,s=Object(g.a)(this.blocks);try{for(s.s();!(r=s.n()).done;){var c=r.value;c[0]=i,c[1]=c[1]+l,l+=1}}catch(E){s.e(E)}finally{s.f()}}else if(this.rotation%4===2){var h,u=this.blocks[3][1],v=-2,b=Object(g.a)(this.blocks);try{for(b.s();!(h=b.n()).done;){var m=h.value;m[0]=m[0]+v,m[1]=u,v+=1}}catch(E){b.e(E)}finally{b.f()}}else{var f,d=this.blocks[1][0],k=-3,y=Object(g.a)(this.blocks);try{for(y.s();!(f=y.n()).done;){var p=f.value;p[0]=d,p[1]=p[1]+k,k+=1}}catch(E){y.e(E)}finally{y.f()}}this.rotation+=1}}]),a}(w),B=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).blocks=[[6,0],[7,0],[8,0],[7,1]],t.rotation=0,t.colour="green",t}return Object(h.a)(a,[{key:"rotate",value:function(){this.rotation%4==0?(this.blocks[0]=[this.blocks[0][0]+1,this.blocks[0][1]-1],this.blocks[2]=[this.blocks[2][0]-1,this.blocks[2][1]+1],this.blocks[3]=[this.blocks[3][0]-1,this.blocks[3][1]-1]):this.rotation%4==1?(this.blocks[0]=[this.blocks[0][0]+1,this.blocks[0][1]+1],this.blocks[2]=[this.blocks[2][0]-1,this.blocks[2][1]-1],this.blocks[3]=[this.blocks[3][0]+1,this.blocks[3][1]-1]):this.rotation%4==2?(this.blocks[0]=[this.blocks[0][0]-1,this.blocks[0][1]+1],this.blocks[2]=[this.blocks[2][0]+1,this.blocks[2][1]-1],this.blocks[3]=[this.blocks[3][0]+1,this.blocks[3][1]+1]):(this.blocks[0]=[this.blocks[0][0]-1,this.blocks[0][1]-1],this.blocks[2]=[this.blocks[2][0]+1,this.blocks[2][1]+1],this.blocks[3]=[this.blocks[3][0]-1,this.blocks[3][1]+1]),this.rotation+=1}}]),a}(w),S=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).blocks=[[6,0],[7,0],[8,0],[8,1]],t.rotation=0,t.colour="yellow",t}return Object(h.a)(a,[{key:"rotate",value:function(){var t=this.blocks[1];this.rotation%4==0?(this.blocks[0]=[t[0],t[1]-1],this.blocks[2]=[t[0]-1,t[1]+1],this.blocks[3]=[t[0],t[1]+1]):this.rotation%4==1?(this.blocks[0]=[t[0]-1,t[1]],this.blocks[2]=[t[0]-1,t[1]-1],this.blocks[3]=[t[0]+1,t[1]]):this.rotation%4==2?(this.blocks[0]=[t[0]+1,t[1]-1],this.blocks[2]=[t[0],t[1]-1],this.blocks[3]=[t[0],t[1]+1]):(this.blocks[0]=[t[0]+1,t[1]+1],this.blocks[2]=[t[0]-1,t[1]],this.blocks[3]=[t[0]+1,t[1]]),this.rotation+=1}}]),a}(w),R=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).blocks=[[6,0],[7,0],[8,0],[6,1]],t.rotation=0,t.colour="orange",t}return Object(h.a)(a,[{key:"rotate",value:function(){var t=this.blocks[1];this.rotation%4==0?(this.blocks[0]=[t[0],t[1]-1],this.blocks[2]=[t[0]-1,t[1]-1],this.blocks[3]=[t[0],t[1]+1]):this.rotation%4==1?(this.blocks[0]=[t[0]-1,t[1]],this.blocks[2]=[t[0]+1,t[1]],this.blocks[3]=[t[0]+1,t[1]-1]):this.rotation%4==2?(this.blocks[0]=[t[0],t[1]+1],this.blocks[2]=[t[0],t[1]-1],this.blocks[3]=[t[0]+1,t[1]+1]):(this.blocks[0]=[t[0]-1,t[1]],this.blocks[2]=[t[0]+1,t[1]],this.blocks[3]=[t[0]-1,t[1]+1]),this.rotation+=1}}]),a}(w),I=(a(55),[R,C,L,B,S,R]);function P(){return I[Math.floor(Math.random()*I.length)]}var x=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(t){var o;Object(c.a)(this,a),(o=e.call(this,t)).intervals=void 0;for(var n=[],r=0;r<20;r++){n[r]=[];for(var i=0;i<10;i++)n[r][i]=document.createElement("div"),n[r][i].classList.add("cell"),n[r][i].style.backgroundColor="grey"}for(var l=P(),s=[],h=0;h<5;h++)s.push(P());return o.state={grid:n,activeTetromino:new l,tetrominoRotation:s,score:0,level:1,gameLooop:null},o.intervals=[],o}return Object(h.a)(a,[{key:"moveTetromino",value:function(t){var e,a=Object(g.a)(this.state.activeTetromino.blocks);try{for(a.s();!(e=a.n()).done;){var o=e.value;this.state.grid[o[1]][o[0]].style.backgroundColor="grey"}}catch(n){a.e(n)}finally{a.f()}37===t?this.detectCollision(this.state.activeTetromino,-1,0)||this.state.activeTetromino.updatePosition(-1,0):39===t?this.detectCollision(this.state.activeTetromino,1,0)||this.state.activeTetromino.updatePosition(1,0):40===t&&(this.detectCollision(this.state.activeTetromino,0,1)||this.state.activeTetromino.updatePosition(0,1))}},{key:"rotateTetromino",value:function(){var t=JSON.parse(JSON.stringify(this.state.activeTetromino));if(t.rotate=this.state.activeTetromino.rotate,t.rotate(),!this.detectCollision(t,0,0)){var e,a=this.state.grid,o=Object(g.a)(this.state.activeTetromino.blocks);try{for(o.s();!(e=o.n()).done;){var n=e.value;a[n[1]][n[0]].style.backgroundColor="grey"}}catch(r){o.e(r)}finally{o.f()}this.state.activeTetromino.rotate()}}},{key:"drawTetromino",value:function(t){var e,a=Object(g.a)(t.blocks);try{for(a.s();!(e=a.n()).done;){var o=e.value;this.state.grid[o[1]][o[0]].style.backgroundColor=t.colour}}catch(n){a.e(n)}finally{a.f()}}},{key:"detectCollision",value:function(t,e,a){var o,n=Object(g.a)(t.blocks);try{for(n.s();!(o=n.n()).done;){var r=o.value;if(!(0<=r[0]+e&&r[0]+e<10)||!(0<=r[1]+a&&r[1]+a<20)||this.state.grid[r[1]+a][r[0]+e].storeBlock)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"getCompleteRows",value:function(){var t=[];for(var e in this.state.grid)this.state.grid[e].every((function(t){return t.storeBlock}))&&t.push(e);return t}},{key:"clearRow",value:function(t){for(var e=t-1;e>=0;e--)for(var a in this.state.grid[e])this.state.grid[e+1][a].style.backgroundColor=this.state.grid[e][a].style.backgroundColor,this.state.grid[e+1][a].storeBlock=this.state.grid[e][a].storeBlock}},{key:"autoDropTetromino",value:function(){var t,e=Object(g.a)(this.state.activeTetromino.blocks);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.state.grid[a[1]][a[0]].style.backgroundColor="grey"}}catch(o){e.e(o)}finally{e.f()}this.state.activeTetromino.updatePosition(0,1)}},{key:"storeBlock",value:function(){var t,e=Object(g.a)(this.state.activeTetromino.blocks);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.state.grid[a[1]][a[0]].storeBlock=!0}}catch(o){e.e(o)}finally{e.f()}}},{key:"detectLose",value:function(){return this.state.grid[0].some((function(t){return t.storeBlock}))}},{key:"runGame",value:function(){if(this.detectCollision(this.state.activeTetromino,0,1)){this.storeBlock();var t=this.state.tetrominoRotation,e=t.shift();t.push(P()),this.setState({activeTetromino:new e,tetrominoRotation:t})}else this.autoDropTetromino();this.drawTetromino(this.state.activeTetromino);var a,o=Object(g.a)(this.getCompleteRows());try{for(o.s();!(a=o.n()).done;){var n=a.value;this.clearRow(n),this.setState({score:this.state.score+1})}}catch(r){o.e(r)}finally{o.f()}this.detectLose()&&alert("You lose")}},{key:"componentDidMount",value:function(){var t,e=this,a=document.getElementById("main-game"),o=Object(g.a)(this.state.grid);try{for(o.s();!(t=o.n()).done;){var n,r=t.value,i=Object(g.a)(r);try{for(i.s();!(n=i.n()).done;){var l=n.value;a.appendChild(l)}}catch(s){i.e(s)}finally{i.f()}}}catch(s){o.e(s)}finally{o.f()}window.addEventListener("keydown",(function(t){27===t.keyCode?e.state.gameLoop?(clearInterval(e.state.gameLoop),e.setState({gameLoop:null})):e.setState({gameLoop:setInterval((function(){e.runGame()}),100)}):38===t.keyCode?(e.rotateTetromino(),e.drawTetromino(e.state.activeTetromino)):e.intervals.push(setInterval((function(){e.moveTetromino(t.keyCode),e.drawTetromino(e.state.activeTetromino)}),25))})),window.addEventListener("keyup",(function(){var t,a=Object(g.a)(e.intervals);try{for(a.s();!(t=a.n()).done;){var o=t.value;clearInterval(o)}}catch(s){a.e(s)}finally{a.f()}e.intervals=[]})),this.setState({gameLoop:setInterval((function(){e.runGame()}),100)})}},{key:"render",value:function(){return n.a.createElement(d.a,null,n.a.createElement(k.a,null,n.a.createElement(y.a,{xs:8},n.a.createElement("div",{id:"main-game"})),n.a.createElement(y.a,{xs:4},n.a.createElement(T,{rotation:this.state.tetrominoRotation}))),n.a.createElement(k.a,null,n.a.createElement(y.a,{xs:8},n.a.createElement(O,{score:this.state.score,level:this.state.level})),n.a.createElement(y.a,{xs:4})))}}]),a}(n.a.Component),D=function(t){Object(u.a)(a,t);var e=Object(v.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return n.a.createElement(d.a,{style:{width:"100%",marginTop:"2vh"}},n.a.createElement(k.a,null,n.a.createElement(y.a,{sm:6},n.a.createElement(x,null)),n.a.createElement(y.a,{sm:6},n.a.createElement(p.a,null,n.a.createElement(p.a.Header,null,"Tetris Clone - Game Description"),n.a.createElement(p.a.Body,null,n.a.createElement(p.a.Title,null,"Instructions"),n.a.createElement(p.a.Text,null,"Each completely filled row will be cleared and points will be awarded. ",n.a.createElement("br",null),"Fill multiple rows with a single piece to multiply the points gain. ",n.a.createElement("br",null),"The game is over once any of your Tetrominos fill the top row. ",n.a.createElement("br",null),"The goal is to play for as long as possible and score the most points. ",n.a.createElement("br",null)),n.a.createElement(p.a.Title,null,"Controls"),n.a.createElement(p.a.Text,null,n.a.createElement("b",null,"Left, Down, Right:")," move the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Up:")," rotate the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Space:")," Fast drop the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Shift:")," Hold the Tetromino. ",n.a.createElement("br",null),n.a.createElement("b",null,"Escape:")," Pause the game."))),n.a.createElement(p.a,{style:{marginTop:"1vh"}},n.a.createElement(p.a.Header,null,"High Scores"),n.a.createElement(p.a.Body,null)))))}}]),a}(n.a.Component);var M=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(f,null),n.a.createElement(l.a,null,n.a.createElement(s.a,{path:"/",component:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.a4cd3a0a.chunk.js.map